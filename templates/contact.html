{% extends "base.html" %}
{% load static %}
{% block content %}

  <section class="contact_section ">
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-6 px-0">
          <div class="img-box">
            <img src="{% static 'images/contact-img.jpg' %}" alt="">
          </div>
        </div>
        <div class="col-lg-5 col-md-6">
          <div class="form_container pr-0 pr-lg-5 mr-0 mr-lg-2">
            <!-- Success message will appear here -->
  <div class="container mt-3" id="success-message" style="display: none; background-color: #5cb85c; color: #fff; padding: 10px;">
    <p>Xabaringiz bizning botimizga muvaffaqiyatli yuborildi ðŸ˜‡ðŸ˜‡ðŸ˜‡</p>
  </div>
  <!-- End success message -->

  <!-- info section -->
  <section class="info_section layout_padding2">
    <div class="container">
      <div class="info_items">
        <!-- Your info items here -->
      </div>
    </div>
  </section>

  <!-- end info_section -->



  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var contactForm = document.getElementById('contact-form');
      var successMessage = document.getElementById('success-message');
  
      contactForm.addEventListener('submit', function (event) {
        event.preventDefault();
  
        // Get the form data
        var formData = new FormData(contactForm);
  
        // Create an AJAX request
        var xhr = new XMLHttpRequest();
        xhr.open('POST', contactForm.getAttribute('action'), true);
        xhr.setRequestHeader('X-CSRFToken', '{{ csrf_token }}');
        xhr.onreadystatechange = function () {
          if (xhr.readyState === 4 && xhr.status === 200) {
            // If the request was successful, hide the form and display the success message
            contactForm.style.display = 'none';
            successMessage.style.display = 'block';
  
            // Redirect after 3 seconds (3000 milliseconds)
            setTimeout(function () {
              window.location.href = "{% url 'home-page' %}";
            }, 3000);
          }
        };
        // Send the form data
        xhr.send(formData);
      });
    });
  </script>
            <div class="heading_container">
              <h2>
                Contact Us
              </h2>
            </div>
            <form id="contact-form" action="{% url 'cantact-page' %}" method="POST">
              {% csrf_token %}
              {{form.as_p}}
              <div class="d-flex">
                <button type="submit">
                  Send
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>

  


{% endblock content %}